// Hardcoded reviews from Reverb
export interface Review {
  id: string
  productName: string
  buyerName: string
  rating: number
  message: string
  date: string
  sourceUrl?: string
}

export const reviews: Review[] = [
  {
    id: '1',
    productName: 'Vintage Yamaha YTS-62 Tenor Saxophone',
    buyerName: 'Joseph T.',
    rating: 5,
    date: '2025-12-26',
    message: "Working with James to purchase a very nicely overhauled Yamaha 62 tenor was a pleasure! Awesome communication from day-1, and sent updates shipping updates while the horn was in transit, once it was delivered, and topped off by reaching to ensure I was pleased with the horn and if I had any questions. Even with shipping costs (from VN to Maryland - only took a few days), we feel we got an incredible deal and recommend James without hesitation.  Thanks, James for all your help!!!",
    sourceUrl: 'https://reverb.com/item/93358464-vintage-yamaha-yts-62-tenor-saxophone',
  },
  {
    id: '2',
    productName: 'Vintage Yamaha YTS-62 Tenor Saxophone',
    buyerName: 'Zach E.',
    rating: 5,
    date: '2025-12-09',
    message: "This was the single best transaction I've had with an online seller. James sent me a 10 minute video minutes after contacting him detailing the horn and exhibiting the condition. Shipping from Vietnam to the US east coast took 3 days and the packaging was impeccable. The horn arrived exactly as described and plays just as well as it should; James did an excellent job replacing pads and adjusting. There are no visible or audible leaks. I would purchase from him again in a heartbeat.",
    sourceUrl: 'https://reverb.com/item/92206523-vintage-yamaha-yts-62-tenor-saxophone',
  },
  {
    id: '3',
    productName: 'Yamaha YTS-62 Tenor Saxophone Purple Logo',
    buyerName: 'Jeff C.',
    rating: 5,
    date: '2025-12-05',
    message: "An amazing horn, and an amazing seller.  He is in immidiate response to emails even though there is a 12 hour time difference. The horn is exactly as advertised, one of the finest Yamaha Purple Logo tenors in the world. Thanks, James!",
    sourceUrl: 'https://reverb.com/item/91715617-yamaha-yts-62-tenor-saxophone-purple-logo',
  },
  {
    id: '4',
    productName: 'Yanagisawa A-900u Alto Saxophone',
    buyerName: 'Nicholas L.',
    rating: 5,
    date: '2025-08-25',
    message: "My new saxophone (to me) is in great working order and a joy to play. I felt as though the process of buying through James was easy and the saxophone itself was reasonably priced. I would purchase from this seller again!",
    sourceUrl: 'https://reverb.com/item/83302961-yanagisawa-a-900u-alto-saxophone',
  },
  {
    id: '5',
    productName: 'Yamaha YAS-875 Customs Alto Saxophone',
    buyerName: 'Cherylle O.',
    rating: 5,
    date: '2025-07-14',
    message: "Smooth Transaction.  Seller was accommodating and nice and answers questions quickly.  Thank you!",
    sourceUrl: 'https://reverb.com/item/81962969-yamaha-yas-875-customs-alto-saxophone',
  },
  {
    id: '6',
    productName: 'Vintage Yamaha YTS-62 Tenor Saxophone',
    buyerName: 'Olivia L.',
    rating: 5,
    date: '2025-06-11',
    message: "The instrument arrived extremely quickly and exactly as advertised. The seller had very frequent communication throughout the whole process. Would definitely purchase from this shop again!",
    sourceUrl: 'https://reverb.com/item/90027668-vintage-yamaha-yts-62-tenor-saxophone',
  },
  {
    id: '7',
    productName: 'Yamaha YTS-62 Tenor Saxophone Purple Logo',
    buyerName: 'Sue S.',
    rating: 5,
    date: '2025-06-03',
    message: "Recently purchased a Tenor Sax from James. I couldn't be happier with both instrument and overall experience. Before shipping out the saxophone, James sent me a video clip to give an overview of entire saxophone! The saxophone arrived exactly as described-beautifully maintained, clean, and in excellent playing condition. James is so knowledgeable, trustworthy, and dedicated to customer satisfaction. Highly recommend to anyone looking for a quality instrument and professional buying experience.",
    sourceUrl: 'https://reverb.com/item/86643089-yamaha-yts-62-tenor-saxophone-purple-logo',
  },
  {
    id: '8',
    productName: 'Yanagisawa A-WO2 Alto Saxophone',
    buyerName: 'Norman M.',
    rating: 5,
    date: '2025-02-20',
    message: "Excellent Experience\nSweet Yani",
    sourceUrl: 'https://reverb.com/item/81615905-yanagisawa-a-wo2-alto-saxophone',
  },
  {
    id: '9',
    productName: 'Vintage Yamaha YTS-62 Purple Logo Tenor Saxophone',
    buyerName: 'Hugh  P.',
    rating: 5,
    date: '2025-02-07',
    message: "James was beyond professional in communicating and through all of his updates I was given ample information on each step of the shipping process. The instrument arrived in perfect condition, impeccably packaged for transit, and reflected the seller's description to a T. James obviously takes his time and care to meet the needs of each customer, both novice saxophonist and professional. I could not recommend another seller more.\nHugh",
    sourceUrl: 'https://reverb.com/item/79382134-vintage-yamaha-yts-62-purple-logo-tenor-saxophone',
  },
  {
    id: '10',
    productName: 'Yamaha YTS-62 Tenor Saxophone Purple Logo',
    buyerName: 'Annabelle J.',
    rating: 5,
    date: '2025-01-04',
    message: "Bought for my son who picked the sax out. Arrived well packaged in 2 to 3 days. James communicated throughout. The sax was just as described and pictured. My son loves the sound. Extremely happy with the purchase, smooth and easy. Thanks, James!",
    sourceUrl: 'https://reverb.com/item/83880866-yamaha-yts-62-tenor-saxophone-purple-logo',
  },
  {
    id: '11',
    productName: 'Vintage Yamaha YTS-61 Purple Logo Tenor Saxophone',
    buyerName: 'William A.',
    rating: 5,
    date: '2024-11-20',
    message: "James is the best!\n\nThis guy really goes above and beyond.  Yes, the sax was in excellent condition and was every bit as good as promised, but what impressed me even more was how quickly the package was mailed and how much attention James paid to the shipping.  The horn was packaged expertly, James secured all the keys with small pieces of foam to make sure they stayed safely in place and monitored the shipping status to make sure the product arrived when and how I expected it to.\n\nA+ James!",
    sourceUrl: 'https://reverb.com/item/80915532-vintage-yamaha-yts-61-purple-logo-tenor-saxophone',
  },
  {
    id: '12',
    productName: 'Yanagisawa A-900 Alto Saxophone',
    buyerName: 'Henry D.',
    rating: 5,
    date: '2024-10-19',
    message: "Communicated with me throughout the entire process. Saxophone was as advertised and plays fantastic.",
    sourceUrl: 'https://reverb.com/item/84159562-yanagisawa-a-900-alto-saxophone',
  },
  {
    id: '13',
    productName: 'Yamaha YTS-62S Silver Tenor Saxophone',
    buyerName: 'Antonio G.',
    rating: 5,
    date: '2024-10-10',
    message: "I had a phenomenal experience with James. My order was processed within a few hours after purchasing and was shipped immediately. James went out of his way and gave the item an inspection before being shipped, even sending additional pictures and videos. Provided timely updates during the shipping process and kept in touch from the start to finish. Special attention was given to packaging. This was a great buying experience and would highly recommend James to others.",
    sourceUrl: 'https://reverb.com/item/84177408-yamaha-yts-62s-silver-tenor-saxophone',
  },
  {
    id: '14',
    productName: 'Yamaha YAS-62 Alto Saxophone Purple Logo',
    buyerName: 'Tenise A.',
    rating: 5,
    date: '2024-08-29',
    message: "I ordered a saxophone for my son from James. James shipped the item the same day of order and we received the saxophone in about 3 days. James took pictures, sent tracking, and communicated with me every step of the way. My son is very happy with the saxophone. It is just as described. I will 100% purchase from James again. 10 out of 10.",
    sourceUrl: 'https://reverb.com/item/83843051-yamaha-yas-62-alto-saxophone-purple-logo',
  },
  {
    id: '15',
    productName: 'Yanagisawa S-6 Soprano Saxophone',
    buyerName: 'Ralph L.',
    rating: 5,
    date: '2024-08-15',
    message: "I have been looking for this horn and seller my entire life! The horn is more than advertised. Experienced soprano players may doubt this but right out of the box and after not having played for years I checked out the intonation against a digital tuner and it was perfect through the entire range! Not a cent of deviation! I went to Berklee and performed professionally most of my life. I was doubtful about buying a non-returnable horn from Viet Nam, but I am now delighted. Got here quick and easy",
    sourceUrl: 'https://reverb.com/item/83687209-yanagisawa-s-6-soprano-saxophone',
  },
  {
    id: '16',
    productName: 'Vintage Yamaha YTS-62 Purple Logo Tenor Saxophone',
    buyerName: 'Matt L.',
    rating: 5,
    date: '2024-07-15',
    message: "Some of the best communication and shipping of any online seller I've encountered.",
    sourceUrl: 'https://reverb.com/item/78435482-vintage-yamaha-yts-62-purple-logo-tenor-saxophone',
  },
  {
    id: '17',
    productName: 'Yanagisawa T900u Tenor Saxophone',
    buyerName: 'David C.',
    rating: 5,
    date: '2024-07-10',
    message: "I had an excellent experience purchasing a saxophone from James. Communications with him both before and after the purchase (e.g., updates on order processing/shipping) were very thorough, considerate, and professional. Packaging was done with care and he shipped the saxophone with a fast service. The saxophone arrived as described and looked beautiful. I also appreciated James' test videos, which allowed me to hear the horns before making a purchase decision. I highly recommend this seller.",
    sourceUrl: 'https://reverb.com/item/78375012-yanagisawa-t900u-tenor-saxophone',
  },
  {
    id: '18',
    productName: 'Yanagisawa A900u Alto Saxophone',
    buyerName: 'Catherine S.',
    rating: 5,
    date: '2024-06-27',
    message: "I really cannot express how happy I am with this purchase experience. James has communicated thoroughly and quickly through the whole process. I'm not a musician myself. I purchased this instrument for my son. James understood that and has offered support for my son beyond the purchase. I always get excited about a good deal, and I feel like I really got one this time. Not only is this a fabulous instrument, but it was obviously treated with great care.  I also received it in just a few days!",
    sourceUrl: 'https://reverb.com/item/78818948-yanagisawa-a900u-alto-saxophone',
  },
  {
    id: '19',
    productName: 'Yamaha YTS-62III Professional Tenor Saxophone',
    buyerName: 'Emily C.',
    rating: 5,
    date: '2024-06-09',
    message: "Wonderful seller. \n-above and beyond communication \n-great quality, as advertised product\n-quick shipping and well packed",
    sourceUrl: 'https://reverb.com/item/77394029-yamaha-yts-62iii-professional-tenor-saxophone',
  },
  {
    id: '20',
    productName: 'Yamaha YAS-875EX Alto Saxophone selected by Nobuya Sugawa',
    buyerName: 'Gregory G.',
    rating: 5,
    date: '2024-05-01',
    message: "Communication was top notch! The seller made sure I was informed of tracking and was very accommodating. They take their business seriously which is rare these days. Highly recommended seller!!",
    sourceUrl: 'https://reverb.com/item/81283167-yamaha-yas-875ex-alto-saxophone-selected-by-nobuya-sugawa',
  },
  {
    id: '21',
    productName: 'Vintage Yamaha YTS-61 Purple Logo Tenor Saxophone',
    buyerName: 'Menna A.',
    rating: 5,
    date: '2024-03-31',
    message: "Really happy to receive this vintage horn. The delivery was so fast andthe communication was absolutely amazing.",
    sourceUrl: 'https://reverb.com/item/78241481-vintage-yamaha-yts-61-purple-logo-tenor-saxophone',
  },
  {
    id: '22',
    productName: 'Yamaha YTS-62II Tenor Saxophone',
    buyerName: 'Noe G.',
    rating: 5,
    date: '2024-03-20',
    message: "Incredible communication and fast shipping, the Sax looked great and played even better! Thank you for having a great selection!",
    sourceUrl: 'https://reverb.com/item/78041316-yamaha-yts-62ii-tenor-saxophone',
  },
  {
    id: '23',
    productName: 'Yamaha YTS-62II G3 Custom Neck Tenor Saxophone',
    buyerName: 'Ryder S.',
    rating: 5,
    date: '2024-02-14',
    message: "Very quick response, was very clear about delivery and had the best intentions for delivery along with a beautiful horn",
    sourceUrl: 'https://reverb.com/item/78301414-yamaha-yts-62ii-g3-custom-neck-tenor-saxophone',
  },
  {
    id: '24',
    productName: 'Yamaha YAS-62s Silver Alto Saxophone',
    buyerName: 'Marcelino L.',
    rating: 5,
    date: '2023-12-17',
    message: "I feel very satisfied and grateful for the responsibility and attention. The instrument is in excellent condition as shown in the images. Cuong, thank you very much, your honesty precedes you. Thank you for giving your best, that is worth a lot.",
    sourceUrl: 'https://reverb.com/item/76990549-yamaha-yas-62s-silver-alto-saxophone',
  },
  {
    id: '25',
    productName: 'Yanagisawa Alto A900',
    buyerName: 'Celeste B.',
    rating: 5,
    date: '2023-12-04',
    message: "Love this horn! The seller was great in responding quickly and answering questions. 10/10",
    sourceUrl: 'https://reverb.com/item/73794797-yanagisawa-alto-a900',
  },
  {
    id: '26',
    productName: 'Yanagisawa A900u Alto Saxophone',
    buyerName: 'Joseph D.',
    rating: 5,
    date: '2023-12-02',
    message: "Seller provided outstanding communication. The instrument arrived quickly and was very well packaged and as described. It is beautiful and will serve well for decades to come. Unfortunately it sustained minor damage during shipping. The seller provided suggested fixes and when that didn't work gave instuctions to have it addressed professionally, reimbursing me and continuing the outstanding communication and service the entire time. Top-notch experience. Highly recommended seller. A++++",
    sourceUrl: 'https://reverb.com/item/75032549-yanagisawa-a900u-alto-saxophone',
  },
  {
    id: '27',
    productName: 'Vintage Yamaha YTS-61 Tenor Saxophone Purple Logo',
    buyerName: 'Thomas B.',
    rating: 5,
    date: '2023-10-26',
    message: "Excellent instrument, minor problems on certain notes, plays and sounds great. Seller was friendly and communicated frequently, arrived very quickly.",
    sourceUrl: 'https://reverb.com/item/73740843-vintage-yamaha-yts-61-tenor-saxophone-purple-logo',
  },
  {
    id: '28',
    productName: 'Vintage Yamaha YSS-61 Soprano SN 1406',
    buyerName: 'Jurga C.',
    rating: 5,
    date: '2023-10-18',
    message: "Bought this for my son. He has several saxophones, this one by far is his favorite. He says it takes less effort to get a sound. It sounds amazing!\nThe buying  process was so easy! The seller was very informative and attentive. The instrument was well packed and arrived intact. Great experience!",
    sourceUrl: 'https://reverb.com/item/72812942-vintage-yamaha-yss-61-soprano-sn-1406',
  },
  {
    id: '29',
    productName: 'Yanagisawa Alto A-902 SN 24xxx',
    buyerName: 'Fahim A.',
    rating: 5,
    date: '2023-10-07',
    message: "Great horn, and buying it was a really simple and easy process! James was super responsive and helped me get everything I needed alongside the sax, including a mouthpiece and ligature! Horn was in great quality and is really bright with a full sound. I know it'll become a very reliable staple for my instrument collection thanks to James!",
    sourceUrl: 'https://reverb.com/item/72770789-yanagisawa-alto-a-902-sn-24xxx',
  },
  {
    id: '30',
    productName: 'Yanagisawa S-6',
    buyerName: 'Bernd  K.',
    rating: 5,
    date: '2023-08-20',
    message: "I am very happy with the whole process of buying my Yanagisawa S6 from James Le. The interaction with the seller was always pleasant, he even went out of his way to make the transaction easier and more transparent. In terms of the sold saxophone: it arrived in the best of conditions, instantly ready to play and the delivery process was very fast. Over all I can warmly recommend the seller. 10/10 experience!",
    sourceUrl: 'https://reverb.com/item/67658887-yanagisawa-s-6',
  },
  {
    id: '31',
    productName: 'Yamaha YAS-62II',
    buyerName: 'Andrew M.',
    rating: 5,
    date: '2023-02-10',
    message: "Fantastic seller! James is thoughtful and attentive to detail.  Great, prompt communication throughout the process. The horn was packed securely and shipped without delay. It arrived in less than four days, and is truly in mint condition as described – looks and plays basically like new. Overall this was one of the most positive online instrument purchase experiences I've had (and I've had a few!) – highly recommended.",
    sourceUrl: 'https://reverb.com/item/60437618-yamaha-yas-62ii',
  },
]

// Helper function to normalize product name for matching
function normalizeProductName(name: string): string {
  return name.toLowerCase()
    .replace(/vintage\s+/gi, '')
    .replace(/\s+/g, ' ')
    .replace(/purple\s+logo/gi, '')
    .replace(/late\s+model/gi, '')
    .replace(/early/gi, '')
    .trim()
}

// Get reviews for a product by matching product name
export function getReviewsForProduct(productName: string): Review[] {
  const normalized = normalizeProductName(productName)
  
  return reviews.filter(review => {
    const reviewNormalized = normalizeProductName(review.productName)
    
    // Exact match
    if (reviewNormalized === normalized) {
      return true
    }
    
    // Extract brand and model
    const productBrand = normalized.match(/(yamaha|yanagisawa|selmer)/i)?.[0]?.toLowerCase()
    const reviewBrand = reviewNormalized.match(/(yamaha|yanagisawa|selmer)/i)?.[0]?.toLowerCase()
    
    if (productBrand && reviewBrand && productBrand !== reviewBrand) {
      return false
    }
    
    // Extract model numbers/identifiers
    const productModel = normalized.match(/(yts|yas|t-|a-|s-|sc-|wo\d+|62|61|875|900|902|992|82z|iii|ii)/i)?.[0]?.toLowerCase()
    const reviewModel = reviewNormalized.match(/(yts|yas|t-|a-|s-|sc-|wo\d+|62|61|875|900|902|992|82z|iii|ii)/i)?.[0]?.toLowerCase()
    
    if (productModel && reviewModel && productModel === reviewModel) {
      return true
    }
    
    // Extract key identifiers
    const productWords = normalized.split(' ').filter(w => w.length > 2 && !['tenor', 'alto', 'soprano', 'saxophone'].includes(w))
    const reviewWords = reviewNormalized.split(' ').filter(w => w.length > 2 && !['tenor', 'alto', 'soprano', 'saxophone'].includes(w))
    
    // Match if most key words match
    const matchingWords = productWords.filter(w => reviewWords.includes(w))
    return matchingWords.length >= Math.min(2, productWords.length)
  })
}

// Calculate rating and review count for a product
export function getProductRatingStats(productName: string): { rating: number; reviewCount: number } {
  const productReviews = getReviewsForProduct(productName)
  
  if (productReviews.length === 0) {
    return { rating: 0, reviewCount: 0 }
  }
  
  const totalRating = productReviews.reduce((sum, r) => sum + r.rating, 0)
  const avgRating = totalRating / productReviews.length
  
  return {
    rating: Math.round(avgRating * 10) / 10,
    reviewCount: productReviews.length,
  }
}
